<%- include('../includes/header.ejs') %>


    <body>
        <%- include('../includes/navbar.ejs') %>
            <div class="content">
                <h1 class="title">Ajouter un adhérent</h1>
                <div class="form-container">
                    <form id="add-form" class="form-flex" enctype="multipart/form-data" method="POST" onsubmit="addAdherent(event)">
                        <div class="form-group">
                            <label for="image" class="form-label">Logo de l' entreprise</label>
                            <input type="file" name="adherentLogo">
                            <input type="text" name="logo" class="form-input" placeholder="Url du logo"/>
                        </div>
                        <div class="form-group">
                            <label for="entreprise" class="form-label">Raison Sociale</label>
                            <input required name="entreprise" id="entreprise" type="text" class="form-input"
                                placeholder="Réponse">
                        </div>
                        <div class="form-group">
                            <label for="section" class="form-label">Section</label>
                            <select required name="section" id="section" class="form-select">
                                <option value="">Choisir une section</option>
                                <option value="artisanat">Artisanat</option>
                                <option value="commerce">Commerce</option>
                                <option value="industrie">Industrie</option>
                                <option value="services">Services</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="activite" class="form-label">Activité de l' entreprise</label>
                            <input required type="text" name="activite" class="form-input" placeholder="Réponse">
                        </div>
                        <div class="form-group">
                            <label for="adresse" class="form-label">Adresse de l' entreprise</label>
                            <input required type="text" name="adresse" class="form-input" placeholder="Réponse">
                        </div>
                        <div class="form-group">
                            <label for="nom" class="form-label">Nom du représentant</label>
                            <input required type="text" name="nom" class="form-input" placeholder="Réponse">
                        </div>
                        <div class="form-group">
                            <label for="prenom" class="form-label">Prénom du représentant</label>
                            <input required type="text" name="prenom" class="form-input" placeholder="Réponse">
                        </div>
                        <div class="form-group">
                            <label for="email" class="form-label">Adresse E-mail</label>
                            <input required type="text" name="email" class="form-input" placeholder="Réponse">
                        </div>
                        <div class="form-group">
                            <label for="telephone" class="form-label">Numéro de téléphone</label>
                            <input required type="text" name="telephone" class="form-input" placeholder="Réponse">
                        </div>
                        <div class="form-group">
                            <label for="identifiant" class="form-label">Mot de passe</label>
                            <div class="generate-field">
                                <input required maxlength="5" id="identifiant" type="text" name="identifiant" class="form-input"
                                    placeholder="Réponse">
                                <div class="generate" onclick="generateCode()"></div>

                            </div>
                        </div>
                        <div class="form-group">
                            <label for="siteweb" class="form-label">Site web</label>
                            <input name="siteweb" type="text" id="siteweb" class="form-input" placeholder="Réponse">
                        </div>
                        <div class="form-action">
                            <input type="submit" class="cta" value="Confirmer la création">
                        </div>
                    </form>
                </div>
            </div>

    </body>
    <script>

function addAdherent(event) {
    event.preventDefault();
    var data = new FormData(document.getElementById("add-form"));
    try {
        fetch(`http://localhost:9999/api/adherents`, {
            method: 'POST',
            body: data
        })
        .then(response => response.json())
        .then((response) => {
            console.log(response);
        })
    } catch (error) {
        console.log(error.message);
    }
}

        function generateCode() {
            let field = document.getElementById('identifiant');
            let result = ''
            var characters = 'ABCDEFGHIJKLMNPQRSTUVWXYZ0123456789';
            var charactersLength = characters.length;
            for (var i = 0; i < 5; i++) {
                result += characters.charAt(Math.floor(Math.random() * charactersLength));
            }
            field.value = result;
        }
    </script>
    <script src="/js/index.js"></script>

    </html>